<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title>NBack by @antxt</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">

    var config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };
	var image;
	var game = new Phaser.Game(config);
	var timer;
	var total = 0;
    var is_game = 0;
	var move_number = 0;
	var button;
	var square_image;
    function preload ()
    {
        this.load.image('sky', 'assets/sky.png');
		this.load.image('field', 'assets/field.png');
		this.load.image('button', 'assets/button.png');
		this.load.image('button_start', 'assets/button_start.png');
		this.load.image('square', 'assets/square.png');
		/**this.load.spritesheet('button', 'assets/buttons/button.png', { frameWidth: 150, frameHeight: 150 });
		this.load.spritesheet('square', 'assets/square.png', { frameWidth: 150, frameHeight: 150 });
        this.load.spritesheet('dude', 'assets/dude.png', { frameWidth: 32, frameHeight: 48 });
		**/
    }

    function create ()
    {
		
        this.add.image(400, 300, 'sky');
		this.add.image(150, 150, 'field');
		this.add.image(300, 150, 'field');
		this.add.image(450, 150, 'field');
		this.add.image(150, 300, 'field');
		this.add.image(300, 300, 'field');
		this.add.image(450, 300, 'field');
		this.add.image(150, 450, 'field');
		this.add.image(300, 450, 'field');
		this.add.image(450, 450, 'field');
		/**this.add.image(450, 450, 'square');**/
		/*this.add.image(650, 300, 'button')*/
		
		//timedEvent = this.time.addEvent({ delay: 500, callback: onEvent, callbackScope: this, loop: true });
		//timedEvent = this.time.addEvent({ delay: 2000, callback: onEvent, callbackScope: this });
		
		var timer = this.time.addEvent({
					delay: 1000,                // ms
					callback: onEvent,
					args: [],
					callbackScope: this,
					loop: false,
					repeat: 20,
					startAt: 0,
					timeScale: 1,
					paused: false
				});


		var sprite = this.add.sprite(650, 300, 'button').setInteractive();
		sprite.on('pointerdown', function (pointer) {

        this.setTint(0xff0000);

		});

		sprite.on('pointerout', function (pointer) {

			this.clearTint();

		});

		sprite.on('pointerup', function (pointer) {

			this.clearTint();

		});
		
		var sprite_start = this.add.sprite(650, 150, 'button_start').setInteractive();
		sprite_start.on('pointerdown', function (pointer) {

        this.setTint(0xff0000);
		//timedEvent = game.time.addEvent({ delay: 500, callback: onEvent, callbackScope: this, loop: true });
		is_game = 1;
		});

		sprite_start.on('pointerout', function (pointer) {

			this.clearTint();

		});

		sprite_start.on('pointerup', function (pointer) {

			this.clearTint();

		});
		}

    function update ()
    {
    }
	function onEvent ()
	{
		if(is_game == 1  && move_number == 0) 
			{
			square_image = this.add.image(150, 150, 'square');
			
			//alert( "square" );
			}
		if(is_game == 1 && move_number == 1)
			{
			square_image.visible  = false
			square_image = this.add.image(150, 300, 'square');
			//;
			//alert( "square" );
			}
		if(is_game == 1 && move_number == 2)
			{
			square_image.visible  = false
			square_image = this.add.image(300, 150, 'square');
			//;
			//alert( "square" );
			}
		if(is_game == 1 && move_number == 3)
			{
			square_image.visible  = false
			square_image = this.add.image(300, 300, 'square');
			//;
			//alert( "square" );
			}
		if(is_game == 1 && move_number == 4)
			{
			square_image.visible  = false
			square_image = this.add.image(300, 450, 'square');
			//;
			//alert( "square" );
			}
		if(is_game == 1 && move_number == 5)
			{
			square_image.visible  = false
			square_image = this.add.image(150, 150, 'square');
			//;
			//alert( "square" );
			}
		if(is_game == 1 && move_number == 6)
			{
			square_image.visible  = false
			is_game = 0;
			move_numer = 0;
			//square_image = this.add.image(150, 150, 'square');
			//;
			//alert( "square" );
			}			
		//alert(move_number);
		if(is_game == 1)
			{
				move_number = move_number + 1;
			}
		
		//game.debug.text('Step: ' + move_number.toFixed(0), 32, 32);
	}
</script>

</body>
</html>